(()=>{"use strict";var t,e={237:(t,e,s)=>{var n=s(755),a=s.n(n);a()((()=>{a()(".js-header").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.$burgerButton=a()(".js-header__burger",t),this.$info=a()(".js-header__info",t)}init(){this._attachEventHandlers()}_attachEventHandlers(){this.$burgerButton.on("click",(()=>this._handleBurgerButtonClick()))}_handleBurgerButtonClick(){this.$burgerButton.toggleClass("header__burger_active"),this.$info.toggleClass("header__info_mobile-expanded")}}(s).init()}))}));var i=s(382),o=s.n(i);a()((()=>{a()(".js-text-field__input").each(((t,e)=>{const s=a()(e),n=s.attr("placeholder");new class{constructor({$input:t,inputFormat:e,placeholder:s}){const n={alias:"datetime",inputFormat:e,placeholder:s};this.outsideInputmask=new(o())(n),this.$input=t}init(){this.outsideInputmask.mask(this.$input)}}({$input:s,inputFormat:"dd.mm.yyyy",placeholder:n}).init()}))}));var r=s(403);class c{constructor(t){this.ctx=t.ctx,this.counters=t.counters,this.colors=t.colors,this.counters.reverse(),this.colors.reverse();const e=this._createData(),s=c.createOutsideOptions();return new r.Z(this.ctx,{type:"doughnut",data:e,options:s})}_createData(){return{datasets:[{data:this.counters,backgroundColor:this.colors}]}}static createOutsideOptions(){return{cutout:"89%",radius:60,borderWidth:2,aspectRatio:1,responsive:!0,maintainAspectRatio:!1,animation:{animateRotate:!1},interaction:{mode:null},layout:{padding:{left:0,right:0,top:-10,bottom:0}},plugins:{tooltip:{enabled:!1},legend:{display:!1}}}}}const h=c;a()((()=>{a()(".js-doughnut-chart").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.$chart=a()(".js-doughnut-chart__chart",t),this.$dots=a()(".js-doughnut-chart__dot",t),this.ctx=this.$chart[0].getContext("2d")}init(){const t=JSON.parse(this.$component.attr("data-items"));this.counters=t.map((t=>t.counter)),this.colors=t.map((t=>t.color)),this.chart=this._createChart(t),this._paintDots()}_createChart(){const t=this.colors.map((t=>"string"==typeof t?t:this._createCanvasGradient(t))),e={ctx:this.ctx,counters:this.counters,colors:t};return new h(e)}_paintDots(){this.$dots.each(((t,e)=>{if("string"==typeof this.colors[t])a()(e).css("background",this.colors[t]);else{const s=this.colors[t].stops.map((t=>`${t.color} ${t.percent}%`)),n=`linear-gradient(${this.colors[t].direction}deg, ${s.join(", ")})`;a()(e).css("background",n)}}))}_createCanvasGradient({direction:t,stops:e}){const s=this.$chart.width(),n=(t-90-90)*(Math.PI/180),a=s/Math.cos(n),i=s-Math.sqrt(a*a-s*s),o=a+Math.sin(n)*i,r=s+Math.cos(-Math.PI/2+n)*o,c=s+Math.sin(-Math.PI/2+n)*o,h=s+Math.cos(Math.PI/2+n)*o,l=s+Math.sin(Math.PI/2+n)*o,u=this.ctx.createLinearGradient(r,c,h,l);return e.forEach((t=>u.addColorStop(t.percent/100,t.color))),u}}(s).init()}))}));const l="like-button_liked";a()((()=>{a()(".js-like-button").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.$icon=a()(".js-like-button__icon",t),this.$counter=a()(".js-like-button__counter",t)}init(){this._attachEventHandlers()}_attachEventHandlers(){this.$component.on("click",(()=>this._handleComponentClick()))}_handleComponentClick(){this._isLiked()?(this._setCounter(this._getCounter()-1),this.$icon.html("favorite_border")):(this._setCounter(this._getCounter()+1),this.$icon.html("favorite")),this.$component.toggleClass(l)}_isLiked(){return this.$component.hasClass(l)}_getCounter(){return Number(this.$counter.html())}_setCounter(t){this.$counter.html(t)}}(s).init()}))}));const u=".js-dropdown__text",d="dropdown_open",p="dropdown__button-minus_active",_="data-value",m="data-row-countables",$="data-date-from",g="data-date-to",C=class{constructor(t){this.$component=t,this.valueChanged=t.attr("data-value-changed"),this.$inputs=a()(".js-dropdown__inputs",t),this.$content=a()(".js-dropdown__content",t)}init(){this.$component.hasClass("dropdown_expanded")||this.$content.css("z-index",Number(this.$content.css("z-index"))+1),this._attachEventHandlers()}_attachEventHandlers(){a()(document).on("click",(t=>this._handleOutOfComponentClick(t))),this.$inputs.on("click",(t=>this._handleInputsClick(t)))}_handleOutOfComponentClick({target:t}){0===this.$component.has(t).length&&this.$component.removeClass(d)}_handleInputsClick({target:t}){0!==a()(t).closest(".js-dropdown__input-box").length&&this.$component.toggleClass(d)}_triggerValueChanged(){this.valueChanged&&a()(document).trigger(this.valueChanged)}};var v=s(808);const b={days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1};class k{constructor(t){this.$component=t.$component,this.texts=t.texts,this.isSplit=t.isSplit,this.triggerValueChanged=t.triggerValueChanged,this.onAcceptButtonClick=t.onAcceptButtonClick,this.DATE_FROM=t.DATE_FROM,this.DATE_TO=t.DATE_TO;const{range:e,altField:s,$content:n}=t,a=this._createAirOptions({range:e,altField:s}),i=new v.Z(n[0],a);return this.$clear=k.findClearButton(i),this._updateClearButtonVisibility(i),k.fixButtonsType(i),i}_createAirOptions(t){return{...t,inline:!0,locale:b,altFieldDateFormat:"d MMM",prevHtml:"",nextHtml:"",multipleDatesSeparator:" - ",dateFormat:"d MMM",moveToOtherMonthsOnSelect:!1,navTitles:{days:"MMMM yyyy"},onSelect:t=>this._onCellSelect(t),buttons:[{content:"очистить",className:"clear",onClick:t=>this._onClearCalendarClick(t)},{content:"применить",className:"accept",onClick:()=>this.onAcceptButtonClick()}]}}_setState(t,e){this._setTexts(t,e),this._setValues(t,e)}_setValues(t,e){const s=k.dateToString(t),n=k.dateToString(e);this.$component.attr(this.DATE_FROM,s),this.$component.attr(this.DATE_TO,n)}_setTexts(t,e){if(!this.isSplit)return;const s=k.dateToString(t,"ru"),n=k.dateToString(e,"ru");a()(this.texts[0]).val(s),a()(this.texts[1]).val(n)}_onCellSelect({date:t,datepicker:e}){const[s,n]=e.selectedDates,a=1===e.selectedDates.length,i=2===e.selectedDates.length;a?(k.fixFocusDisplay(t,e),this._setState(s,"")):i&&this._setState(s,n),this._update(e)}_onClearCalendarClick(t){t.clear(),this.isSplit&&a()(this.texts[1]).val("")}_update(t){this._updateClearButtonVisibility(t),this.triggerValueChanged()}_updateClearButtonVisibility(t){0!==t.selectedDates.length?this.$clear.show():this.$clear.hide()}static findClearButton(t){const e=a()("button",t.$buttons);return a()(e[0])}static fixButtonsType(t){a()("button",t.$buttons).attr("type","button")}static fixFocusDisplay(t,e){const s=`.air-datepicker-cell[data-year=${t.getFullYear()}][data-month=${t.getMonth()}][data-date=${t.getDate()}]`,n=a()(s,e.$datepicker);n.hasClass("-focus-")&&(n.addClass("-range-from-"),n.addClass("-range-to-"))}static dateToString(t,e="en"){return"string"==typeof t?t:t.toLocaleDateString(e)}}const f=k,x=class extends C{constructor(t){super(t),this.texts=a()(u,this.$component),this.isSplit=void 0!==this.$component.attr("data-is-split"),this.isRange=void 0!==this.$component.attr("data-is-range"),this.datepicker=this._createCalendar()}init(){super.init();const t=JSON.parse(this.$component.attr("data-selected"));this.datepicker.selectDate(t)}_handleAcceptButtonClick(){this.$component.removeClass(d)}_createCalendar(){const t={$component:this.$component,$content:this.$content,texts:this.texts,isDatepicker:this.isDatepicker,isSplit:this.isSplit,range:this.isRange,triggerValueChanged:()=>this._triggerValueChanged(),onAcceptButtonClick:()=>this._handleAcceptButtonClick(),altField:this.texts[0],DATE_FROM:$,DATE_TO:g};return new f(t)}};function w(t,e){if(t>10&&t<20)return e[2];switch(t%10){case 1:return e[0];case 2:case 3:case 4:return e[1];default:return e[2]}}function y(t,e="",s="ru"){return`${t.toLocaleString(s)}${e}`}const D=class extends C{constructor(t){super(t),this.maxLen=Number(t.attr("data-max-len")),this.hasControls=void 0!==t.has("data-has-controls"),this.$text=a()(u,this.$component),this.rows=this._getRows()}init(){this.hasControls&&this._initControls(),super.init(),this._update()}_initControls(){this.$clear=this.$component.find(".js-dropdown__clear-button"),this.$accept=this.$component.find(".js-dropdown__accept-button")}_attachEventHandlers(){super._attachEventHandlers(),this.hasControls&&(this.$clear.on("click",(()=>this._handleClearButtonClick())),this.$accept.on("click",(t=>this._handleAcceptButtonClick(t)))),this.rows.forEach((t=>{t.$minus.on("click",(()=>this._handleMinusClick(t.$minus,t.$counter))),t.$plus.on("click",(()=>this._handlePlusClick(t.$minus,t.$counter)))}))}_handleClearButtonClick(){this.rows.forEach((t=>{t.$minus.removeClass(p),t.$counter.html(0)})),this._update()}_handleAcceptButtonClick(){this.$component.removeClass(d)}_handleMinusClick(t,e){const s=Number(e.html());0!==s&&(1===s&&t.removeClass(p),e.html(s-1),this._update())}_handlePlusClick(t,e){const s=Number(e.html());0===s&&t.addClass(p),e.html(s+1),this._update()}_setText(t){let e=t.substring(0,this.maxLen);t.length>=this.maxLen&&(e+="..."),this.$text.val(e)}_getRows(){return Array.from(a()(".js-dropdown__row",this.$component)).map((t=>{const e=a()(t),s={$minus:e.find(".js-dropdown__button-minus"),$counter:e.find(".js-dropdown__counter"),$plus:e.find(".js-dropdown__button-plus"),countables:null};return void 0!==e.attr(m)&&(s.countables=JSON.parse(e.attr(m))),s}))}_areAllCountersZero(){return this.rows.every((t=>0===Number(t.$counter.html())))}_update(){this._updateText(),this._updateValue(),this._updateClearButtonVisibility(),this._triggerValueChanged()}_updateText(){this._areAllCountersZero()?this._setText(""):this._setText(this._calcDropdownText())}_updateValue(){this.$component.attr(_,this._calcDropdownValue())}_updateClearButtonVisibility(){this._areAllCountersZero()?this.$clear.hide():this.$clear.show()}_calcDropdownValue(){return this.rows.map((t=>Number(t.$counter.html())))}_calcDropdownText(){return this.rows.map((t=>{const e=Number(t.$counter.html());return 0===e?"":`${e} ${w(e,t.countables)}`})).filter((t=>""!==t)).join(", ")}},T=class extends D{constructor(t){super(t),this.countables=JSON.parse(this.$component.attr("data-countables"))}_sumAllDropdownCountables(){return this.rows.filter((t=>null===t.countables)).reduce(((t,e)=>t+Number(e.$counter.html())),0)}_calcDropdownText(){const t=this._sumAllDropdownCountables();return[t?`${t} ${w(t,this.countables)}`:"",...this.rows.filter((t=>null!==t.countables)).map((t=>{const e=Number(t.$counter.html());return 0===e?"":`${e} ${w(e,t.countables)}`}))].filter((t=>""!==t)).join(", ")}};a()((()=>{a()(".js-dropdown").each(((t,e)=>{const s=a()(e);(function(t,e){switch(t){case"datepicker":return new x(e);case"counter":return new D(e);case"summator":return new T(e);default:return new C(e)}})(s.attr("data-type"),s).init()}))}));a()((()=>{a()(".js-reservation").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.price=Number(t.attr("data-price")),this.discount=Number(t.attr("data-discount")),this.postfix=t.attr("data-postfix"),this.datepickerValueChanged=t.attr("data-datepicker-value-changed"),this.guestsValueChanged=t.attr("data-guests-value-changed"),this.additionals=JSON.parse(t.attr("data-additionals")),this.$datepicker=a()(a()(".js-reservation__datepicker > .js-dropdown",t)[0]),this.$guests=a()(a()(".js-reservation__guests-dropdown > .js-dropdown",t)[0]),this.$rent=a()(".js-reservation__rent",t),this.$rentTotal=a()(".js-reservation__rent-total",t),this.$additionalTotal=a()(".js-reservation__additional-total",t),this.$totalCost=a()(".js-reservation__total-cost",t)}init(){this._update(),this._attachEventHandlers()}_attachEventHandlers(){a()(document).on(this.datepickerValueChanged,(()=>this._handleDatepickerValueChanged())),a()(document).on(this.guestsValueChanged,(()=>this._handleGuestsValueChanged()))}_handleDatepickerValueChanged(){this._update()}_handleGuestsValueChanged(){this._update()}_update(){this._updateRent(),this._updateAdditional(),this._updateTotalCost()}_updateRent(){const t=y(this.price,this.postfix),e=this._countDays(),s=w(e,["сутки","суток","суток"]);this.$rent.html(`${t} x ${e} ${s}`);const n=y(this.price*e,this.postfix);this.$rentTotal.html(n)}_updateAdditional(){const t=y(this._calcAdditional(),this.postfix);this.$additionalTotal.html(t)}_updateTotalCost(){const t=y(this._calcTotalCost(),this.postfix);this.$totalCost.html(t)}_countDays(){const t=Date.parse(this.$datepicker.attr($));return(Date.parse(this.$datepicker.attr(g))-t)/864e5-1}_calcAdditional(){return this.$guests.attr(_).split(",").map((t=>Number(t))).reduce(((t,e,s)=>t+e*this.additionals[s]),0)}_calcTotalCost(){const t=this._countDays(),e=this._calcAdditional();return this.price*t-this.discount+e}}(s).init()}))}))}},s={};function n(t){var a=s[t];if(void 0!==a)return a.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,n),i.exports}n.m=e,t=[],n.O=(e,s,a,i)=>{if(!s){var o=1/0;for(l=0;l<t.length;l++){for(var[s,a,i]=t[l],r=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((t=>n.O[t](s[c])))?s.splice(c--,1):(r=!1,i<o&&(o=i));if(r){t.splice(l--,1);var h=a();void 0!==h&&(e=h)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[s,a,i]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={125:0};n.O.j=e=>0===t[e];var e=(e,s)=>{var a,i,[o,r,c]=s,h=0;if(o.some((e=>0!==t[e]))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(c)var l=c(n)}for(e&&e(s);h<o.length;h++)i=o[h],n.o(t,i)&&t[i]&&t[i][0](),t[o[h]]=0;return n.O(l)},s=self.webpackChunktoxin=self.webpackChunktoxin||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=n.O(void 0,[815,590,403],(()=>n(237)));a=n.O(a)})();