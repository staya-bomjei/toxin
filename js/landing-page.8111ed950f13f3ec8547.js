(()=>{"use strict";var t,e={694:(t,e,s)=>{var n=s(755),a=s.n(n);class i{constructor(t){this.$component=t,this.$burgerButton=a()(".js-header__burger",t),this.$info=a()(".js-header__info",t)}attachEventHandlers(){a()(document).on("resize",(()=>this.handleDocumentResize())),this.$burgerButton.on("click",(()=>this.handleBurgerButtonClick()))}handleDocumentResize(){this.$burgerButton.is(":hidden")&&this.$info.show()}handleBurgerButtonClick(){this.$burgerButton.toggleClass("header__burger_active"),this.$info.toggle()}render(){this.attachEventHandlers()}}a()((()=>{a()(".js-header").each(((t,e)=>{const s=a()(e);new i(s).render()}))}));var o=s(382),r=s.n(o);class l{constructor({$input:t,inputFormat:e,placeholder:s}){const n={alias:"datetime",inputFormat:e,placeholder:s};this.outsideInputmask=new(r())(n),this.$input=t}render(){this.outsideInputmask.mask(this.$input)}}a()((()=>{a()(".js-text-field__input").each(((t,e)=>{const s=a()(e),n=s.attr("placeholder");new l({$input:s,inputFormat:"dd.mm.yyyy",placeholder:n}).render()}))}));const c="backgrounds__image_visible",h="backgrounds__image_fade";class d{constructor(t){this.$component=t,this.delay=Number(t.attr("data-delay")),this.delayMS=1e3*this.delay,this.duration=Number(t.attr("data-duration")),this.durationMS=1e3*this.duration}init(){const t=a()(".js-backgrounds__image",this.$component);this.images=Array.from(t).map((t=>a()(t))),this.setImageVisibility(0,!0),this.setImagesAnimationDuration()}async startAnimationLoop(){const t=this.images.length;this.imageIndex=0,this.nextImageIndex=(this.imageIndex+1)%t,setInterval((async()=>{this.setImageZIndex(this.imageIndex,-1),this.setImageZIndex(this.nextImageIndex,-2),this.setImageVisibility(this.nextImageIndex,!0),this.playImageAnimation(this.imageIndex),await this.stopImageAnimation(this.imageIndex),this.imageIndex=this.nextImageIndex,this.nextImageIndex=(this.imageIndex+1)%t}),this.delayMS)}setImageVisibility(t,e){e?this.images[t].addClass(c):this.images[t].removeClass(c)}setImagesAnimationDuration(){this.images.forEach((t=>{t.css("animation-duration",`${this.duration}s`)}))}setImageZIndex(t,e){this.images[t].css("z-index",e)}playImageAnimation(t){this.images[t].addClass(h)}async stopImageAnimation(t){setTimeout((()=>{this.images[t].removeClass(h),this.images[t].removeClass(c)}),this.durationMS)}render(){this.init(),this.images.length>1&&this.startAnimationLoop()}}a()((()=>{a()(".js-backgrounds").each(((t,e)=>{const s=a()(e);new d(s).render()}))}));const u=".js-dropdown__text",p="dropdown_open",m="dropdown__button-minus_active",g="data-row-countables";class ${constructor(t){this.$component=t,this.valueChanged=t.attr("data-value-changed"),this.$dropdowns=a()(".js-dropdown__dropdowns",t),this.$content=a()(".js-dropdown__content",t)}init(){this.$component.hasClass("dropdown_expanded")||this.$content.css("z-index",Number(this.$content.css("z-index"))+1)}attachEventHandlers(){a()(document).on("click",(t=>this.handleOutOfComponentClick(t))),this.$dropdowns.on("click",(t=>this.handleDropdownsClick(t)))}handleOutOfComponentClick({target:t}){0===this.$component.has(t).length&&this.$component.removeClass(p)}handleDropdownsClick({target:t}){0!==a()(t).closest(".js-dropdown__input-box").length&&this.$component.toggleClass(p)}triggerValueChanged(){this.valueChanged&&a()(document).trigger(this.valueChanged)}render(){this.init(),this.attachEventHandlers()}}var C=s(808);const x={days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1};class b{constructor(t){this.$component=t.$component,this.texts=t.texts,this.isSplit=t.isSplit,this.triggerValueChanged=t.triggerValueChanged,this.onAcceptButtonClick=t.onAcceptButtonClick,this.DATE_FROM=t.DATE_FROM,this.DATE_TO=t.DATE_TO;const{range:e,altField:s,$content:n}=t,a=this.createAirOptions({range:e,altField:s}),i=new C.Z(n[0],a);return this.$clear=b.findClearButton(i),this.updateClearButtonVisability(i),b.fixButtonsType(i),i}createAirOptions(t){return{...t,inline:!0,locale:x,altFieldDateFormat:"d MMM",prevHtml:"",nextHtml:"",multipleDatesSeparator:" - ",dateFormat:"d MMM",moveToOtherMonthsOnSelect:!1,navTitles:{days:"MMMM yyyy"},onSelect:t=>this.onCellSelect(t),buttons:[{content:"очистить",className:"clear",onClick:t=>this.onClearCalendarClick(t)},{content:"применить",className:"accept",onClick:()=>this.onAcceptButtonClick()}]}}setState(t,e){this.setTexts(t,e),this.setValues(t,e)}setValues(t,e){const s=b.dateToString(t),n=b.dateToString(e);this.$component.attr(this.DATE_FROM,s),this.$component.attr(this.DATE_TO,n)}setTexts(t,e){if(!this.isSplit)return;const s=b.dateToString(t,"ru"),n=b.dateToString(e,"ru");a()(this.texts[0]).val(s),a()(this.texts[1]).val(n)}onCellSelect({date:t,datepicker:e}){const[s,n]=e.selectedDates,a=1===e.selectedDates.length,i=2===e.selectedDates.length;a?(b.fixFocusDisplay(t,e),this.setState(s,"")):i&&this.setState(s,n),this.update(e)}onClearCalendarClick(t){t.clear(),this.isSplit&&a()(this.texts[1]).val("")}update(t){this.updateClearButtonVisability(t),this.triggerValueChanged()}updateClearButtonVisability(t){0!==t.selectedDates.length?this.$clear.show():this.$clear.hide()}static findClearButton(t){const e=a()("button",t.$buttons);return a()(e[0])}static fixButtonsType(t){a()("button",t.$buttons).attr("type","button")}static fixFocusDisplay(t,e){const s=`.air-datepicker-cell[data-year=${t.getFullYear()}][data-month=${t.getMonth()}][data-date=${t.getDate()}]`,n=a()(s,e.$datepicker);n.hasClass("-focus-")&&(n.addClass("-range-from-"),n.addClass("-range-to-"))}static dateToString(t,e="en"){return"string"==typeof t?t:t.toLocaleDateString(e)}}class v extends ${constructor(t){super(t),this.texts=a()(u,this.$component),this.isSplit=void 0!==this.$component.attr("data-is-split"),this.isRange=void 0!==this.$component.attr("data-is-range"),this.datepicker=this.createCalendar({range:this.isRange});const e=JSON.parse(this.$component.attr("data-selected"));this.datepicker.selectDate(e)}handleAcceptButtonClick(){this.$component.removeClass(p)}createCalendar(t={}){const e={...t,$component:this.$component,$content:this.$content,texts:this.texts,isDatepicker:this.isDatepicker,isSplit:this.isSplit,triggerValueChanged:()=>this.triggerValueChanged(),onAcceptButtonClick:()=>this.handleAcceptButtonClick(),altField:this.texts[0],DATE_FROM:"data-date-from",DATE_TO:"data-date-to"};return new b(e)}}function f(t,e){if(t>10&&t<20)return e[2];switch(t%10){case 1:return e[0];case 2:case 3:case 4:return e[1];default:return e[2]}}class w extends ${constructor(t){super(t),this.maxLen=Number(t.attr("data-max-len")),this.hasControls=void 0!==t.has("data-has-controls"),this.$text=a()(u,this.$component)}init(){super.init(),this.rows=this.getRows(),this.hasControls&&(this.$clear=this.$component.find(".js-dropdown__clear-button"),this.$accept=this.$component.find(".js-dropdown__accept-button")),this.update()}attachEventHandlers(){super.attachEventHandlers(),this.hasControls&&(this.$clear.on("click",(()=>this.handleClearButtonClick())),this.$accept.on("click",(t=>this.handleAcceptButtonClick(t)))),this.rows.forEach((t=>{t.$minus.on("click",(()=>this.handleMinusClick(t.$minus,t.$counter))),t.$plus.on("click",(()=>this.handlePlusClick(t.$minus,t.$counter)))}))}handleClearButtonClick(){this.rows.forEach((t=>{t.$minus.removeClass(m),t.$counter.html(0)})),this.updateText(),this.updateClearButtonVisability()}handleAcceptButtonClick(){this.$component.removeClass(p)}handleMinusClick(t,e){const s=Number(e.html());0!==s&&(1===s&&t.removeClass(m),e.html(s-1),this.update())}handlePlusClick(t,e){const s=Number(e.html());0===s&&t.addClass(m),e.html(s+1),this.update()}setText(t){let e=t.substring(0,this.maxLen);t.length>=this.maxLen&&(e+="..."),this.$text.val(e)}getRows(){return Array.from(a()(".js-dropdown__row",this.$component)).map((t=>{const e=a()(t),s={$minus:a()(t).find(".js-dropdown__button-minus"),$counter:a()(t).find(".js-dropdown__counter"),$plus:a()(t).find(".js-dropdown__button-plus"),countables:null};return void 0!==e.attr(g)&&(s.countables=JSON.parse(a()(t).attr(g))),s}))}areAllCountersZero(){return this.rows.every((t=>0===Number(t.$counter.html())))}update(){this.updateText(),this.updateValue(),this.updateClearButtonVisability(),this.triggerValueChanged()}updateText(){this.areAllCountersZero()?this.setText(""):this.setText(this.calcDropdownText())}updateValue(){this.$component.attr("data-value",this.calcDropdownValue())}updateClearButtonVisability(){this.areAllCountersZero()?this.$clear.hide():this.$clear.show()}calcDropdownValue(){return this.rows.map((t=>Number(t.$counter.html())))}calcDropdownText(){return this.rows.map((t=>{const e=Number(t.$counter.html());return 0===e?"":`${e} ${f(e,t.countables)}`})).filter((t=>""!==t)).join(", ")}render(){this.init(),this.attachEventHandlers()}}class y extends w{constructor(t){super(t),this.countables=JSON.parse(this.$component.attr("data-countables"))}sumAllCounters(){return this.rows.filter((t=>null===t.countables)).reduce(((t,e)=>t+Number(e.$counter.html())),0)}calcDropdownText(){const t=this.sumAllCounters();return[t?`${t} ${f(t,this.countables)}`:"",...this.rows.filter((t=>null!==t.countables)).map((t=>{const e=Number(t.$counter.html());return 0===e?"":`${e} ${f(e,t.countables)}`}))].filter((t=>""!==t)).join(", ")}}a()((()=>{a()(".js-dropdown").each(((t,e)=>{const s=a()(e);(function(t,e){switch(t){case"datepicker":return new v(e);case"counter":return new w(e);case"summator":return new y(e);default:return new $(e)}})(s.attr("data-type"),s).render()}))}))}},s={};function n(t){var a=s[t];if(void 0!==a)return a.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,n),i.exports}n.m=e,t=[],n.O=(e,s,a,i)=>{if(!s){var o=1/0;for(h=0;h<t.length;h++){for(var[s,a,i]=t[h],r=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((t=>n.O[t](s[l])))?s.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(h--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var h=t.length;h>0&&t[h-1][2]>i;h--)t[h]=t[h-1];t[h]=[s,a,i]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={781:0};n.O.j=e=>0===t[e];var e=(e,s)=>{var a,i,[o,r,l]=s,c=0;if(o.some((e=>0!==t[e]))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(l)var h=l(n)}for(e&&e(s);c<o.length;c++)i=o[c],n.o(t,i)&&t[i]&&t[i][0](),t[o[c]]=0;return n.O(h)},s=self.webpackChunktoxin=self.webpackChunktoxin||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=n.O(void 0,[815,590],(()=>n(694)));a=n.O(a)})();