(()=>{"use strict";var t,e={927:(t,e,s)=>{var n=s(755),a=s.n(n);const i=".js-menu__item",o="menu__item_active";class r{constructor(t){this.$component=t,this.$items=t.children(),this.items=Array.from(this.$items)}init(){this._handleItemMouseDown=this._handleItemMouseDown.bind(this),this._handleOutOfComponentMouseDown=this._handleOutOfComponentMouseDown.bind(this),this._attachEventHandlers()}_attachEventHandlers(){this.$items.each(((t,e)=>{a()(e).on("mousedown",this._handleItemMouseDown)})),a()(document).on("mousedown",this._handleOutOfComponentMouseDown)}_handleItemMouseDown({target:t}){const e=a()(t).closest(i),s=e.hasClass(o);this._isTopmostItem(e)&&this._setAllItemsInactive(),s?r.setItemInactive(e):e.addClass(o)}_handleOutOfComponentMouseDown({target:t}){const{$component:e}=this;0===e.has(t).length&&this._setAllItemsInactive()}_isTopmostItem(t){const[e]=t;return this.items.some((t=>t===e))}_setAllItemsInactive(){this.$items.each(((t,e)=>{const s=a()(e);r.setItemInactive(s)}))}static setItemInactive(t){t.removeClass(o),a()(i,t).removeClass(o)}}const c=r;a()((()=>{a()(".js-menu").each(((t,e)=>{const s=a()(e);new c(s).init()}))}));a()((()=>{a()(".js-header").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.$burgerButton=a()(".js-header__burger",t),this.$info=a()(".js-header__info",t)}init(){this._handleBurgerButtonClick=this._handleBurgerButtonClick.bind(this),this._attachEventHandlers()}_attachEventHandlers(){const{$burgerButton:t}=this;t.on("click",this._handleBurgerButtonClick)}_handleBurgerButtonClick(){const{$burgerButton:t,$info:e}=this;t.toggleClass("header__burger_active"),e.toggleClass("header__info_mobile-expanded")}}(s).init()}))}));var l=s(382),h=s.n(l);a()((()=>{a()(".js-text-field__input").each(((t,e)=>{const s=a()(e),n=s.attr("placeholder");new class{constructor({$input:t,inputFormat:e,placeholder:s}){const n={alias:"datetime",inputFormat:e,placeholder:s};this.outsideInputmask=new(h())(n),this.$input=t}init(){const{outsideInputmask:t,$input:e}=this;t.mask(e)}}({$input:s,inputFormat:"dd.mm.yyyy",placeholder:n}).init()}))}));var u=s(403);class d{constructor(t){this.ctx=t.ctx,this.counters=t.counters,this.colors=t.colors,this.radius=t.radius,this.counters.reverse(),this.colors.reverse();const e=this._createData(),s=d.createOutsideOptions();return new u.Z(this.ctx,{type:"doughnut",data:e,options:{...s,radius:t.radius}})}_createData(){const{counters:t,colors:e}=this;return{datasets:[{data:t,backgroundColor:e}]}}static createOutsideOptions(){return{cutout:"89%",borderWidth:2,aspectRatio:1,responsive:!0,maintainAspectRatio:!1,animation:{animateRotate:!1},interaction:{mode:null},layout:{padding:{left:0,right:0,top:-10,bottom:0}},plugins:{tooltip:{enabled:!1},legend:{display:!1}}}}}const p=d;a()((()=>{a()(".js-doughnut-chart").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.$chartWrapper=a()(".js-doughnut-chart__chart-wrapper",t),this.$chart=a()(".js-doughnut-chart__chart",t),this.$dots=a()(".js-doughnut-chart__dot",t),this.ctx=this.$chart[0].getContext("2d")}init(){const t=JSON.parse(this.$component.attr("data-items"));this.counters=t.map((t=>t.counter)),this.colors=t.map((t=>t.color));const e=JSON.parse(this.$component.attr("data-size"));this.$chartWrapper.css("width",e),this.$chartWrapper.css("height",e),this.chart=this._createChart(e/2),this._paintDots()}_createChart(t){const e=this.colors.map((t=>"string"==typeof t?t:this._createCanvasGradient(t))),{ctx:s,counters:n}=this;return new p({ctx:s,counters:n,colors:e,radius:t})}_paintDots(){const{$dots:t,colors:e}=this;t.each(((t,s)=>{if("string"==typeof e[t])a()(s).css("background",e[t]);else{const n=e[t].stops.map((t=>`${t.color} ${t.percent}%`)),i=`linear-gradient(${e[t].direction}deg, ${n.join(", ")})`;a()(s).css("background",i)}}))}_createCanvasGradient({direction:t,stops:e}){const{$chart:s,ctx:n}=this,a=s.width(),i=(t-90-90)*(Math.PI/180),o=a/Math.cos(i),r=a-Math.sqrt(o*o-a*a),c=o+Math.sin(i)*r,l=a+Math.cos(-Math.PI/2+i)*c,h=a+Math.sin(-Math.PI/2+i)*c,u=a+Math.cos(Math.PI/2+i)*c,d=a+Math.sin(Math.PI/2+i)*c,p=n.createLinearGradient(l,h,u,d);return e.forEach((t=>p.addColorStop(t.percent/100,t.color))),p}}(s).init()}))}));const _="like-button_liked";a()((()=>{a()(".js-like-button").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.$icon=a()(".js-like-button__icon",t),this.$counter=a()(".js-like-button__counter",t)}init(){this._handleComponentClick=this._handleComponentClick.bind(this),this._attachEventHandlers()}_attachEventHandlers(){const{$component:t}=this;t.on("click",this._handleComponentClick)}_handleComponentClick(){const{$component:t,$icon:e}=this;this._isLiked()?(this._setCounter(this._getCounter()-1),e.html("favorite_border")):(this._setCounter(this._getCounter()+1),e.html("favorite")),t.toggleClass(_)}_isLiked(){const{$component:t}=this;return t.hasClass(_)}_getCounter(){const{$counter:t}=this;return Number(t.html())}_setCounter(t){const{$counter:e}=this;e.html(t)}}(s).init()}))}));const m=".js-dropdown__button-minus",C=".js-dropdown__counter",g="dropdown_open",$="dropdown__button-minus_active",k="dropdown__button-plus_active",v="data-value",b="data-row-countables",f=class{constructor(t){this.$component=t,this.valueChanged=t.attr("data-value-changed"),this.$inputBox=a()(".js-dropdown__input-box",t),this.$content=a()(".js-dropdown__content",t)}init(){this._handleOutOfComponentClick=this._handleOutOfComponentClick.bind(this),this._handleInputBoxClick=this._handleInputBoxClick.bind(this),this._attachEventHandlers()}_attachEventHandlers(){const{$inputBox:t}=this;a()(document).on("click",this._handleOutOfComponentClick),t.on("click",this._handleInputBoxClick)}_handleOutOfComponentClick({target:t}){const{$component:e}=this;0===e.has(t).length&&e.removeClass(g)}_handleInputBoxClick(){const{$component:t}=this;t.toggleClass(g)}_triggerValueChanged(){const{valueChanged:t}=this;t&&a()(document).trigger(t)}};function w(t,e){if(t>10&&t<20)return e[2];switch(t%10){case 1:return e[0];case 2:case 3:case 4:return e[1];default:return e[2]}}function x(t,e="",s="ru"){return`${t.toLocaleString(s)}${e}`}const O=class extends f{constructor(t){super(t),this.maxLen=Number(t.attr("data-max-len")),this.constraint=Number(t.attr("data-constraint")),this.hasControls=void 0!==t.has("data-has-controls"),this.$text=a()(".js-dropdown__text",t),this.rows=this._getRows()}init(){const{hasControls:t,constraint:e}=this;t&&this._initControls(),this._calcCountersSum()>e&&this._setAllCounters(0),this._handleClearButtonClick=this._handleClearButtonClick.bind(this),this._handleAcceptButtonClick=this._handleAcceptButtonClick.bind(this),this._handleMinusClick=this._handleMinusClick.bind(this),this._handlePlusClick=this._handlePlusClick.bind(this),super.init(),this._update()}_initControls(){const{$component:t}=this;this.$clear=t.find(".js-dropdown__clear-button"),this.$accept=t.find(".js-dropdown__accept-button")}_attachEventHandlers(){super._attachEventHandlers();const{hasControls:t,rows:e,$clear:s,$accept:n}=this;t&&(s.on("click",this._handleClearButtonClick),n.on("click",this._handleAcceptButtonClick)),e.forEach((t=>{t.$minus.on("click",this._handleMinusClick),t.$plus.on("click",this._handlePlusClick)}))}_handleClearButtonClick(){this._setAllCounters(0),this._update()}_handleAcceptButtonClick(){const{$component:t}=this;t.removeClass(g)}_handleMinusClick({target:t}){const e=a()(t);if(!e.hasClass($))return;const s=e.siblings(C),n=Number(s.html());1===n&&e.removeClass($),s.html(n-1),this._update()}_handlePlusClick({target:t}){const e=a()(t);if(!e.hasClass(k))return;const s=e.siblings(m),n=e.siblings(C),i=Number(n.html());0===i&&s.addClass($),n.html(i+1),this._update()}_setText(t){const{maxLen:e,$text:s}=this;let n=t.substring(0,e);t.length>=e&&(n+="..."),s.val(n)}_getRows(){const{$component:t}=this;return Array.from(a()(".js-dropdown__row",t)).map((t=>{const e=a()(t),s={$minus:e.find(m),$counter:e.find(C),$plus:e.find(".js-dropdown__button-plus"),countables:null};return void 0!==e.attr(b)&&(s.countables=JSON.parse(e.attr(b))),s}))}_areAllCountersZero(){const{rows:t}=this;return t.every((t=>0===Number(t.$counter.html())))}_calcCountersSum(){const{rows:t}=this;return t.reduce(((t,e)=>t+Number(e.$counter.html())),0)}_setAllCounters(t){const{rows:e}=this;e.forEach((e=>{e.$minus.removeClass($),e.$counter.html(t)}))}_setAllPlusesActivity(t){const{rows:e}=this;e.forEach((e=>{t?e.$plus.addClass(k):e.$plus.removeClass(k)}))}_update(){this._updateText(),this._updateValue(),this._updateClearButtonVisibility(),this._updatePlusButtonsActivity(),this._triggerValueChanged()}_updateText(){this._areAllCountersZero()?this._setText(""):this._setText(this._calcDropdownText())}_updateValue(){const{$component:t}=this;t.attr(v,this._calcDropdownValue())}_updateClearButtonVisibility(){const{$clear:t}=this;this._areAllCountersZero()?t.hide():t.show()}_updatePlusButtonsActivity(){const{constraint:t}=this,e=this._calcCountersSum()<t;this._setAllPlusesActivity(e)}_calcDropdownValue(){const{rows:t}=this;return t.map((t=>Number(t.$counter.html())))}_calcDropdownText(){const{rows:t}=this;return t.map((t=>{const e=Number(t.$counter.html());return 0===e?"":`${e} ${w(e,t.countables)}`})).filter((t=>""!==t)).join(", ")}},y=class extends O{constructor(t){super(t),this.countables=JSON.parse(t.attr("data-countables"))}_sumAllDropdownCountables(){return this.rows.filter((t=>null===t.countables)).reduce(((t,e)=>t+Number(e.$counter.html())),0)}_calcDropdownText(){const{rows:t,countables:e}=this,s=this._sumAllDropdownCountables();return[s?`${s} ${w(s,e)}`:"",...t.filter((t=>null!==t.countables)).map((t=>{const e=Number(t.$counter.html());return 0===e?"":`${e} ${w(e,t.countables)}`}))].filter((t=>""!==t)).join(", ")}};a()((()=>{a()(".js-dropdown").each(((t,e)=>{const s=a()(e);(function(t,e){switch(t){case"counter":return new O(e);case"summator":return new y(e);default:return new f(e)}})(s.attr("data-type"),s).init()}))}));var D=s(808);const A={days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1};class j{constructor(t){this.$component=t.$component,this.texts=t.texts,this.isSplit=t.isSplit,this.triggerValueChanged=t.triggerValueChanged,this.onAcceptButtonClick=t.onAcceptButtonClick,this.DATE_FROM=t.DATE_FROM,this.DATE_TO=t.DATE_TO;const{range:e,altField:s,$content:n}=t,a=this._createAirOptions({range:e,altField:s}),i=new D.Z(n[0],a);return this.$clear=j.findClearButton(i),this._updateClearButtonVisibility(i),j.fixButtonsType(i),i}_createAirOptions(t){return{...t,inline:!0,locale:A,altFieldDateFormat:"d MMM",prevHtml:"",nextHtml:"",multipleDatesSeparator:" - ",dateFormat:"d MMM",moveToOtherMonthsOnSelect:!1,navTitles:{days:"MMMM yyyy"},onSelect:t=>this._onCellSelect(t),buttons:[{content:"очистить",className:"clear",onClick:t=>this._onClearCalendarClick(t)},{content:"применить",className:"accept",onClick:()=>this.onAcceptButtonClick()}]}}_setState(t,e){this._setTexts(t,e),this._setValues(t,e)}_setValues(t,e){const{$component:s,DATE_FROM:n,DATE_TO:a}=this,i=j.dateToString(t),o=j.dateToString(e);s.attr(n,i),s.attr(a,o)}_setTexts(t,e){const{isSplit:s,texts:n}=this;if(!s)return;const i=j.dateToString(t,"ru"),o=j.dateToString(e,"ru");a()(n[0]).val(i),a()(n[1]).val(o)}_onCellSelect({datepicker:t}){const[e,s]=t.selectedDates,n=1===t.selectedDates.length,a=2===t.selectedDates.length;n?(j.fixFocusDisplay(e,t),this._setState(e,"")):a&&this._setState(e,s),this._update(t)}_onClearCalendarClick(t){const{isSplit:e,texts:s}=this;t.clear(),e&&a()(s[1]).val("")}_update(t){this._updateClearButtonVisibility(t),this.triggerValueChanged()}_updateClearButtonVisibility(t){const{$clear:e}=this;0!==t.selectedDates.length?e.show():e.hide()}static findClearButton(t){const e=a()("button",t.$buttons);return a()(e[0])}static fixButtonsType(t){a()("button",t.$buttons).attr("type","button")}static fixFocusDisplay(t,e){const s=`.air-datepicker-cell[data-year=${t.getFullYear()}][data-month=${t.getMonth()}][data-date=${t.getDate()}]`,n=a()(s,e.$datepicker);n.hasClass("-focus-")&&(n.addClass("-range-from-"),n.addClass("-range-to-"))}static dateToString(t,e="en"){return"string"==typeof t?t:t.toLocaleDateString(e)}}const M=j,B="datepicker_open",T="data-date-from",S="data-date-to";a()((()=>{a()(".js-datepicker").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.valueChanged=t.attr("data-value-changed"),this.$inputs=a()(".js-datepicker__inputs",t),this.$content=a()(".js-datepicker__content",t),this.texts=a()(".js-datepicker__text",t),this.isSplit=void 0!==t.attr("data-is-split"),this.isRange=void 0!==t.attr("data-is-range"),this.datepicker=this._createCalendar()}init(){const t=JSON.parse(this.$component.attr("data-selected")),{datepicker:e}=this;e.selectDate(t),this._handleOutOfComponentClick=this._handleOutOfComponentClick.bind(this),this._handleInputsClick=this._handleInputsClick.bind(this),this._attachEventHandlers()}_attachEventHandlers(){const{$inputs:t}=this;a()(document).on("click",this._handleOutOfComponentClick),t.on("click",this._handleInputsClick)}_handleAcceptButtonClick(){const{$component:t}=this;t.removeClass(B)}_handleOutOfComponentClick({target:t}){const{$component:e}=this;0===e.has(t).length&&e.removeClass(B)}_handleInputsClick({target:t}){const{$component:e}=this;0!==a()(t).closest(".js-datepicker__input-box").length&&e.toggleClass(B)}_triggerValueChanged(){const{valueChanged:t}=this;t&&a()(document).trigger(t)}_createCalendar(){const{$component:t,$content:e,texts:s,isSplit:n,isRange:a}=this,i={$component:t,$content:e,texts:s,isSplit:n,range:a,triggerValueChanged:()=>this._triggerValueChanged(),onAcceptButtonClick:()=>this._handleAcceptButtonClick(),altField:s[0],DATE_FROM:T,DATE_TO:S};return new M(i)}}(s).init()}))}));a()((()=>{a()(".js-reservation").each(((t,e)=>{const s=a()(e);new class{constructor(t){this.$component=t,this.price=Number(t.attr("data-price")),this.discount=Number(t.attr("data-discount")),this.serviceCharge=Number(t.attr("data-service-charge")),this.postfix=t.attr("data-postfix"),this.datepickerValueChanged=t.attr("data-datepicker-value-changed"),this.guestsValueChanged=t.attr("data-guests-value-changed"),this.additionals=JSON.parse(t.attr("data-additionals")),this.$datepicker=a()(a()(".js-reservation__datepicker > .js-datepicker",t)[0]),this.$guests=a()(a()(".js-reservation__guests-dropdown > .js-dropdown",t)[0]),this.$rent=a()(".js-reservation__rent",t),this.$rentTotal=a()(".js-reservation__rent-total",t),this.$additionalTotal=a()(".js-reservation__additional-total",t),this.$totalCost=a()(".js-reservation__total-cost",t)}init(){this._update(),this._handleDatepickerValueChanged=this._handleDatepickerValueChanged.bind(this),this._handleGuestsValueChanged=this._handleGuestsValueChanged.bind(this),this._attachEventHandlers()}_attachEventHandlers(){const{datepickerValueChanged:t,guestsValueChanged:e}=this;a()(document).on(t,this._handleDatepickerValueChanged),a()(document).on(e,this._handleGuestsValueChanged)}_handleDatepickerValueChanged(){this._update()}_handleGuestsValueChanged(){this._update()}_update(){this._updateRent(),this._updateAdditional(),this._updateTotalCost()}_updateRent(){const{price:t,postfix:e,$rent:s,$rentTotal:n}=this,a=x(t,e),i=this._countDays(),o=w(i,["сутки","суток","суток"]);s.html(`${a} x ${i} ${o}`);const r=x(t*i,e);n.html(r)}_updateAdditional(){const{postfix:t,$additionalTotal:e}=this,s=x(this._calcAdditional(),t);e.html(s)}_updateTotalCost(){const{postfix:t,$totalCost:e}=this,s=x(this._calcTotalCost(),t);e.html(s)}_countDays(){const{$datepicker:t}=this,e=Date.parse(t.attr(T));return(Date.parse(t.attr(S))-e)/864e5-1}_calcAdditional(){const{$guests:t,additionals:e}=this;return t.attr(v).split(",").map((t=>Number(t))).reduce(((t,s,n)=>t+s*e[n]),0)}_calcTotalCost(){const{price:t,discount:e,serviceCharge:s}=this;return t*this._countDays()-e+s+this._calcAdditional()}}(s).init()}))}))}},s={};function n(t){var a=s[t];if(void 0!==a)return a.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,n),i.exports}n.m=e,t=[],n.O=(e,s,a,i)=>{if(!s){var o=1/0;for(h=0;h<t.length;h++){for(var[s,a,i]=t[h],r=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((t=>n.O[t](s[c])))?s.splice(c--,1):(r=!1,i<o&&(o=i));if(r){t.splice(h--,1);var l=a();void 0!==l&&(e=l)}}return e}i=i||0;for(var h=t.length;h>0&&t[h-1][2]>i;h--)t[h]=t[h-1];t[h]=[s,a,i]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={125:0};n.O.j=e=>0===t[e];var e=(e,s)=>{var a,i,[o,r,c]=s,l=0;if(o.some((e=>0!==t[e]))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(c)var h=c(n)}for(e&&e(s);l<o.length;l++)i=o[l],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(h)},s=self.webpackChunktoxin=self.webpackChunktoxin||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=n.O(void 0,[815,590,403],(()=>n(927)));a=n.O(a)})();