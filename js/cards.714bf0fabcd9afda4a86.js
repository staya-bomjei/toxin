(()=>{"use strict";var t,e={938:(t,e,s)=>{function a(t,e){if(t>10&&t<20)return e[2];switch(t%10){case 1:return e[0];case 2:case 3:case 4:return e[1];default:return e[2]}}function i(t,e="",s="ru"){return`${t.toLocaleString(s)}${e}`}s.d(e,{nK:()=>a,R3:()=>i})},539:(t,e,s)=>{s(177),s(623),s(729);var a=s(755),i=s.n(a),n=s(938),r=s(96),o=s(968);const h=`.js-reservation__datepicker > ${o.sI}`,l=`.js-reservation__guests-dropdown > ${r.qt}`;i()((()=>{i()(".js-reservation").each(((t,e)=>{const s=i()(e);new class{constructor(t){this.$component=t,this.price=Number(t.attr("data-price")),this.discount=Number(t.attr("data-discount")),this.serviceCharge=Number(t.attr("data-service-charge")),this.postfix=t.attr("data-postfix"),this.datepickerValueChanged=t.attr("data-datepicker-value-changed"),this.guestsValueChanged=t.attr("data-guests-value-changed"),this.additionals=JSON.parse(t.attr("data-additionals")),this.$datepicker=i()(i()(h,t)[0]),this.$guests=i()(i()(l,t)[0]),this.$rent=i()(".js-reservation__rent",t),this.$rentTotal=i()(".js-reservation__rent-total",t),this.$additionalTotal=i()(".js-reservation__additional-total",t),this.$totalCost=i()(".js-reservation__total-cost",t)}init(){this._update(),this._handleDatepickerValueChanged=this._handleDatepickerValueChanged.bind(this),this._handleGuestsValueChanged=this._handleGuestsValueChanged.bind(this),this._attachEventHandlers()}_attachEventHandlers(){const{datepickerValueChanged:t,guestsValueChanged:e}=this;i()(document).on(t,this._handleDatepickerValueChanged),i()(document).on(e,this._handleGuestsValueChanged)}_handleDatepickerValueChanged(){this._update()}_handleGuestsValueChanged(){this._update()}_update(){this._updateRent(),this._updateAdditional(),this._updateTotalCost()}_updateRent(){const{price:t,postfix:e,$rent:s,$rentTotal:a}=this,i=(0,n.R3)(t,e),r=this._countDays(),o=(0,n.nK)(r,["сутки","суток","суток"]);s.html(`${i} x ${r} ${o}`);const h=(0,n.R3)(t*r,e);a.html(h)}_updateAdditional(){const{postfix:t,$additionalTotal:e}=this,s=(0,n.R3)(this._calcAdditional(),t);e.html(s)}_updateTotalCost(){const{postfix:t,$totalCost:e}=this,s=(0,n.R3)(this._calcTotalCost(),t);e.html(s)}_countDays(){const{$datepicker:t}=this,e=Date.parse(t.attr(o.q8));return(Date.parse(t.attr(o.LX))-e)/864e5-1}_calcAdditional(){const{$guests:t,additionals:e}=this;return t.attr(r.o9).split(",").map((t=>Number(t))).reduce(((t,s,a)=>t+s*e[a]),0)}_calcTotalCost(){const{price:t,discount:e,serviceCharge:s}=this;return t*this._countDays()-e+s+this._calcAdditional()}}(s).init()}))})),s(291);i()((()=>{i()(".js-room-thumbnail").each(((t,e)=>{const s=i()(e);new class{constructor(t){this.$component=t,this.selected=Number(t.attr("data-selected")),this.$prev=i()(".js-room-thumbnail__prev",t),this.$next=i()(".js-room-thumbnail__next",t)}init(){const{$component:t,selected:e}=this;this.images=Array.from(i()(".js-room-thumbnail__image",t)).map((t=>i()(t))),this.buttons=Array.from(i()(".js-room-thumbnail__button",t)).map((t=>i()(t))),this._selectImage(e),this._handlePrevClick=this._handlePrevClick.bind(this),this._handleNextClick=this._handleNextClick.bind(this),this._handleButtonClick=this._handleButtonClick.bind(this),this._attachEventHandlers()}_attachEventHandlers(){const{$prev:t,$next:e,buttons:s}=this;t.on("click",this._handlePrevClick),e.on("click",this._handleNextClick),s.forEach((t=>{t.on("click",this._handleButtonClick)}))}_handlePrevClick(){const{selected:t,images:e}=this,s=0===t?e.length-1:t-1;this._selectImage(s)}_handleNextClick(){const{selected:t,images:e}=this,s=(t+1)%e.length;this._selectImage(s)}_handleButtonClick({target:t}){const e=this._getButtonIndex(t);this._selectImage(e)}_getButtonIndex(t){const{buttons:e}=this;return e.findIndex((e=>e.is(t)))}_selectImage(t){const{images:e,buttons:s}=this;this._setSelected(e,t,"room-thumbnail__image_selected"),this._setSelected(s,t,"room-thumbnail__button_selected"),this.selected=t}_setSelected(t,e,s){if(0===t.length)return;const{selected:a}=this;t[a].removeClass(s),t[e].addClass(s)}}(s).init()}))}))}},s={};function a(t){var i=s[t];if(void 0!==i)return i.exports;var n=s[t]={exports:{}};return e[t].call(n.exports,n,n.exports,a),n.exports}a.m=e,t=[],a.O=(e,s,i,n)=>{if(!s){var r=1/0;for(c=0;c<t.length;c++){for(var[s,i,n]=t[c],o=!0,h=0;h<s.length;h++)(!1&n||r>=n)&&Object.keys(a.O).every((t=>a.O[t](s[h])))?s.splice(h--,1):(o=!1,n<r&&(r=n));if(o){t.splice(c--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,i,n]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={12:0};a.O.j=e=>0===t[e];var e=(e,s)=>{var i,n,[r,o,h]=s,l=0;if(r.some((e=>0!==t[e]))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(h)var c=h(a)}for(e&&e(s);l<r.length;l++)n=r[l],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},s=self.webpackChunktoxin=self.webpackChunktoxin||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var i=a.O(void 0,[815,590,326],(()=>a(539)));i=a.O(i)})();