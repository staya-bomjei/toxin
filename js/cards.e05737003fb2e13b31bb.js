(()=>{"use strict";var t,e={938:(t,e,s)=>{function a(t,e){if(t>10&&t<20)return e[2];switch(t%10){case 1:return e[0];case 2:case 3:case 4:return e[1];default:return e[2]}}function i(t,e="",s="ru"){return`${t.toLocaleString(s)}${e}`}s.d(e,{nK:()=>a,R3:()=>i})},539:(t,e,s)=>{s(177),s(623),s(729);var a=s(755),i=s.n(a),n=s(938),h=s(96),r=s(968);const o=`.js-reservation__datepicker > ${r.sI}`,l=`.js-reservation__guests-dropdown > ${h.qt}`;i()((()=>{i()(".js-reservation").each(((t,e)=>{const s=i()(e);new class{constructor(t){this.$component=t,this.price=Number(t.attr("data-price")),this.discount=Number(t.attr("data-discount")),this.postfix=t.attr("data-postfix"),this.datepickerValueChanged=t.attr("data-datepicker-value-changed"),this.guestsValueChanged=t.attr("data-guests-value-changed"),this.additionals=JSON.parse(t.attr("data-additionals")),this.$datepicker=i()(i()(o,t)[0]),this.$guests=i()(i()(l,t)[0]),this.$rent=i()(".js-reservation__rent",t),this.$rentTotal=i()(".js-reservation__rent-total",t),this.$additionalTotal=i()(".js-reservation__additional-total",t),this.$totalCost=i()(".js-reservation__total-cost",t)}init(){this._update(),this._handleDatepickerValueChanged=this._handleDatepickerValueChanged.bind(this),this._handleGuestsValueChanged=this._handleGuestsValueChanged.bind(this),this._attachEventHandlers()}_attachEventHandlers(){i()(document).on(this.datepickerValueChanged,this._handleDatepickerValueChanged),i()(document).on(this.guestsValueChanged,this._handleGuestsValueChanged)}_handleDatepickerValueChanged(){this._update()}_handleGuestsValueChanged(){this._update()}_update(){this._updateRent(),this._updateAdditional(),this._updateTotalCost()}_updateRent(){const t=(0,n.R3)(this.price,this.postfix),e=this._countDays(),s=(0,n.nK)(e,["сутки","суток","суток"]);this.$rent.html(`${t} x ${e} ${s}`);const a=(0,n.R3)(this.price*e,this.postfix);this.$rentTotal.html(a)}_updateAdditional(){const t=(0,n.R3)(this._calcAdditional(),this.postfix);this.$additionalTotal.html(t)}_updateTotalCost(){const t=(0,n.R3)(this._calcTotalCost(),this.postfix);this.$totalCost.html(t)}_countDays(){const t=Date.parse(this.$datepicker.attr(r.q8));return(Date.parse(this.$datepicker.attr(r.LX))-t)/864e5-1}_calcAdditional(){return this.$guests.attr(h.o9).split(",").map((t=>Number(t))).reduce(((t,e,s)=>t+e*this.additionals[s]),0)}_calcTotalCost(){const t=this._countDays(),e=this._calcAdditional();return this.price*t-this.discount+e}}(s).init()}))})),s(291);i()((()=>{i()(".js-room-thumbnail").each(((t,e)=>{const s=i()(e);new class{constructor(t){this.$component=t,this.selected=Number(t.attr("data-selected")),this.$prev=i()(".js-room-thumbnail__prev",t),this.$next=i()(".js-room-thumbnail__next",t)}init(){this.images=Array.from(i()(".js-room-thumbnail__image",this.$component)).map((t=>i()(t))),this.buttons=Array.from(i()(".js-room-thumbnail__button",this.$component)).map((t=>i()(t))),this._selectImage(this.selected),this._handlePrevClick=this._handlePrevClick.bind(this),this._handleNextClick=this._handleNextClick.bind(this),this._handleButtonClick=this._handleButtonClick.bind(this),this._attachEventHandlers()}_attachEventHandlers(){this.$prev.on("click",this._handlePrevClick),this.$next.on("click",this._handleNextClick),this.buttons.forEach((t=>{t.on("click",this._handleButtonClick)}))}_handlePrevClick(){const t=0===this.selected?this.images.length-1:this.selected-1;this._selectImage(t)}_handleNextClick(){const t=(this.selected+1)%this.images.length;this._selectImage(t)}_handleButtonClick({target:t}){const e=this._getButtonIndex(t);this._selectImage(e)}_getButtonIndex(t){return this.buttons.findIndex((e=>e.is(t)))}_selectImage(t){this._setSelected(this.images,t,"room-thumbnail__image_selected"),this._setSelected(this.buttons,t,"room-thumbnail__button_selected"),this.selected=t}_setSelected(t,e,s){0!==t.length&&(t[this.selected].removeClass(s),t[e].addClass(s))}}(s).init()}))}))}},s={};function a(t){var i=s[t];if(void 0!==i)return i.exports;var n=s[t]={exports:{}};return e[t].call(n.exports,n,n.exports,a),n.exports}a.m=e,t=[],a.O=(e,s,i,n)=>{if(!s){var h=1/0;for(d=0;d<t.length;d++){for(var[s,i,n]=t[d],r=!0,o=0;o<s.length;o++)(!1&n||h>=n)&&Object.keys(a.O).every((t=>a.O[t](s[o])))?s.splice(o--,1):(r=!1,n<h&&(h=n));if(r){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,i,n]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={12:0};a.O.j=e=>0===t[e];var e=(e,s)=>{var i,n,[h,r,o]=s,l=0;if(h.some((e=>0!==t[e]))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(o)var d=o(a)}for(e&&e(s);l<h.length;l++)n=h[l],a.o(t,n)&&t[n]&&t[n][0](),t[h[l]]=0;return a.O(d)},s=self.webpackChunktoxin=self.webpackChunktoxin||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var i=a.O(void 0,[815,590,326],(()=>a(539)));i=a.O(i)})();